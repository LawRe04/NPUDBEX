# DBEX
我的数据库大作业

电商平台管理系统
项目简介
这是一个基于 Flask 的电商管理系统，包含用户管理、商品管理、订单管理、评价管理、购物车功能以及平台统计和日志功能。系统支持买家、卖家和管理员三种角色，具有完整的权限控制和基本的日志记录功能。

功能特点
1. 用户管理
注册与登录，支持买家、卖家、管理员角色。
管理员可以查看所有用户信息。
2. 商品管理
卖家可以添加、修改、删除自己的商品。
买家可以查看所有商品，直接下单或加入购物车。
商品包含价格、库存、商家、平均评分等信息。
3. 订单管理
买家可以下单购买商品，支持支付和取消订单。
管理员可以查看所有订单，支持删除操作。
4. 评价管理
买家可以对购买的商品进行评价（1-5 星），支持更新和删除评价。
卖家可以查看自己商品的所有评价。
管理员可以查看和删除任何评价。
5. 平台统计
用户统计：总用户数、买家数、卖家数。
商品统计：商品总数、库存不足商品数。
订单统计：订单总数、完成订单数、取消订单数、总销售额。
热销商品：按销量排序的最热销商品。
日志统计：日志总数、涉及的用户数、最近的操作日志。
6. 日志管理
系统记录买家、卖家和管理员的关键操作日志，便于追踪和监控。
技术架构
后端
框架：Flask
数据库：MySQL
权限控制：JWT（JSON Web Token）
日志记录：自定义日志表记录用户操作
前端
语言：HTML、JavaScript
交互：通过 fetch API 与后端交互，基于 Token 的身份验证。
安装与运行
1. 安装依赖
确保您已安装 Python 和 MySQL，推荐使用虚拟环境。

软件包请自行查看文件中的import部分

2. 初始化数据库
运行 db_create.txt 文件中的 SQL 语句创建数据库和表结构。

3. 配置文件
编辑 config.py 文件，修改数据库连接信息：

DB_HOST = 'localhost'
DB_USER = 'your_user'
DB_PASSWORD = 'your_password'
DB_NAME = 'your_database'
4. 运行项目
启动 Flask 服务：

python app.py
访问地址：http://127.0.0.1:5000

项目结构

项目目录
├── app.py                  # 主入口文件
├── db.py                   # 数据库连接文件
├── config.py               # 配置文件
├── routes/                 # 路由文件夹
│   ├── users.py            # 用户相关接口
│   ├── products.py         # 商品管理接口
│   ├── orders.py           # 订单管理接口
│   ├── cart.py             # 购物车接口
│   ├── reviews.py          # 评价管理接口
│   ├── admin.py            # 平台统计与日志接口
│   ├── permissions.py      # 权限控制
│   └── average_ratings.py  # 平均评分计算
├── login.html          # 登录页面
├── register.html       # 注册页面
├── admin_home.html     # 管理员主页
├── buyer_home.html     # 买家主页
└── seller_home.html    # 卖家主页
└── db_create.txt           # 数据库初始化脚本
角色说明
1. 买家
查看商品、评价商品。
下单或加入购物车。
查看并管理自己的订单。
查看并管理自己的评价。
2. 卖家
添加、修改、删除商品。
查看自己商品的评价。
3. 管理员
查看和管理所有用户。
查看和管理所有订单。
查看和管理所有商品。
查看和删除所有评价。
查看平台统计与操作日志。

注意事项
权限管理：接口通过角色权限限制了访问范围，注意分配不同角色的 Token。
数据安全：对用户输入的文本进行 XSS 和 SQL 注入防范。

功能改进方向
优化前端样式，引入 Bootstrap 或其他前端框架。
增加分页功能，减少数据加载时间。
实现更精细的日志分析与可视化。
提高安全性，例如通过 HTTPS 加密数据传输和哈希方式存储密码。
